<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Graphical Password</title>
<script src="js/jquery.js"></script>
<script src="js/jquery-ui.js"></script>

<link rel="stylesheet" href="editor/jquery.wysiwyg.css" type="text/css"/>
<link rel="stylesheet" href="editor/jquery.wysiwyg.modal.css" type="text/css"/>
<link rel="stylesheet" href="js/jquery-ui.css">

<style>
.selPalette, .selCanvas {width:25px; height:20px; padding:0.5em; margin:10px; border:1px solid black;
	color:#333; text-align:center; text-shadow: 0px 5px 20px #fff;}
#selectedColor {width:25px; height:25px; padding:0.5em; margin:31px 10px 0 10px; border:1px solid black; float:left;}
.hover {cursor:pointer; text-shadow:0px 6px 10px blue, 0px 10px 15px red;}
</style>

<script type="text/javascript" src="editor/jquery.wysiwyg.js"></script>
<script type="text/javascript" src="editor/lib/jquery.simplemodal.js"></script>
<script type="text/javascript" src="editor/controls/wysiwyg.image.js"></script>
<script type="text/javascript" src="editor/controls/wysiwyg.link.js"></script>
<script type="text/javascript" src="editor/controls/wysiwyg.table.js"></script>

<script type="text/javascript">
var color = "#fff";

$(document).ready(function($) {
	$.ajaxSetup({
		cache: false
	});
	$("button").button();
	$("#tabs").tabs();

	$('input#lineSite').change(function () {
		var str = $("input#lineSite").val();
		if (str=="") {return};
		// Post via AJAX
		$.post("jqXHR/s", {val: str},
			function(input) {$("input#lineResult").val(input.message);},
			'json');
	});
	$('input#linePwd').change(function () {
		var str = $("input#linePwd").val();
		if (str=="") {return};
		// Post via AJAX
		$.post("jqXHR/p", {val: str},
			function(input) {$("input#lineResult").val(input.message);},
			'json');
	});

	$(".selPalette").hover(
		function () {$(this).addClass("hover");},
		function () {$(this).removeClass("hover");}
	);
	$(".selCanvas").hover(
		function () {$(this).addClass("hover");},
		function () {$(this).removeClass("hover");}
	);

	$(".selPalette").click(function() {
		color = $(this).css("background-color");
		$("#selectedColor").css("background-color", color);
	});
	$(".selCanvas").click(function() {
		$(this).css("background-color", color);
	});

	$("#reset").click(function() {
		$(".selCanvas").css("background-color", "#fff");
		$("input#lineGResult").val("");
	});

	$("#generate").click(function() {
	var matrix = ""; var rgb = ""; var result = "";
	function hex(x) {return ("0" + parseInt(x).toString(16)).slice(-2);}
	$('.selCanvas').each(function(index) {
		rgb = $(this).css('background-color').match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
		result = hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
		matrix += result + ' ';
	});
	// Must have 3 colors selected
	if ( $('.selCanvas').length - matrix.match(/ffffff/g).length < 3 ) {
		alert( "Cannot generate password !\nMust paint at least 3 cells !" );
		return;
	};
	// Must have 3 white cells
	if ( matrix.match(/ffffff/g).length < 3 ) {
		alert( "Cannot generate password !\nMust have at least 3 white cells !" );
		return;
	};
	// Post message via AJAX
	$.post("jqXHR/g", {val: matrix},
		function(input) {$("input#lineGResult").val(input.message);},
		'json');
	});
});

(function($) {
	$(document).ready(function() {
		$('#wysiwyg').wysiwyg({
		css: 'editor/custom.css',
		controls: {
			code : {visible : false},

			bold          : {visible : true},
			italic        : {visible : true},
			underline     : {visible : true},
			strikeThrough : {visible : true},

			h1 : {visible : true},
			h2 : {visible : true},
			h3 : {visible : true},

			justifyLeft   : {visible : true},
			justifyCenter : {visible : true},
			justifyRight  : {visible : true},
			justifyFull   : {visible : true},

			indent  : {visible : true},
			outdent : {visible : true},

			subscript   : {visible : true},
			superscript : {visible : true},

			undo : {visible : true},
			redo : {visible : true},

			insertOrderedList    : {visible : true},
			insertUnorderedList  : {visible : true},
			insertHorizontalRule : {visible : true},

			cut   : {visible : true},
			copy  : {visible : true},
			paste : {visible : true},
			html  : { visible: true },
			increaseFontSize : {visible : true},
			decreaseFontSize : {visible : true},

			h4: {
				groupIndex: 7,
				visible: true,
				className: "h4",
				command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
				"arguments": ($.browser.msie || $.browser.safari) ? "<h4>" : "h4",
				tags: ["h4"],
				tooltip: "Header 4"
			},

			h5: {
				groupIndex: 7,
				visible: true,
				className: "h5",
				command: ($.browser.msie || $.browser.safari)	? "FormatBlock" : "heading",
				"arguments": ($.browser.msie || $.browser.safari) ? "<h5>" : "h5",
				tags: ["h5"],
				tooltip: "Header 5"
			},

			h6: {
				groupIndex: 7,
				visible: true,
				className: "h6",
				command: ($.browser.msie || $.browser.safari) ? "FormatBlock" : "heading",
				"arguments": ($.browser.msie || $.browser.safari) ? "<h6>" : "h6",
				tags: ["h6"],
				tooltip: "Header 6"
			},

			},
		});
	});
})(jQuery);

</script>
</head>
<body>

<div id="tabs">
<ul>
<li><a href="#tabs-1">Visual Pass</a></li>
<li><a href="#tabs-2">Graphical Pass</a></li>
<li><a href="#tabs-3">Encryption</a></li>
</ul>

<div id="tabs-1" class="ui-widget"><div class="ui-state-highlight ui-corner-all" style="margin:25px;padding:1em;">
	<p><span class="ui-icon ui-icon-info" style="float:left;margin-right:0.3em;margin-top:0.2em;"></span><strong>Password generator</strong> </p>
	<label for="lineSite">Site you want to generate a password for:</label><br /><input id="lineSite" style="width:250px;"/><br /><br />
	<label for="linePwd">A secret keyword/ password for this site:<br />
	<span style="font-size:small;">If the keyword is long, the password will also be longer !</span></label><br />
	<input id="linePwd" style="width:250px;" /><br /><br />
	<label for="lineResult">Resulted password >></label><br /><input id="lineResult" style="width:250px;" /><br />
</div></div>

<div id="tabs-2" class="ui-widget"><div class="ui-state-highlight ui-corner-all" style="margin:25px;padding:1em;">
<p><span class="ui-icon ui-icon-info" style="float:left;margin-right:0.3em;margin-top:0.2em;"></span><strong>Visual Password generator</strong> </p>

<table style="float:left;">
<tr><td colspan="3">Select color ...</td></tr>
<tr>
	<td class="selPalette" style="background:red;"> R</td>
	<td class="selPalette" style="background:yellow;"> Y</td>
	<td class="selPalette" style="background:blue;"> B</td>
</tr><tr>
	<td class="selPalette" style="background:orange;"> O</td>
	<td class="selPalette" style="background:green;"> G</td>
	<td class="selPalette" style="background:darkviolet;"> V</td>
<tr></tr>
	<td class="selPalette" style="background:white;"> X</td>
	<td class="selPalette" style="background:grey;"> G</td>
	<td class="selPalette" style="background:black;"> B</td>
</tr>
</table>

<span style="float:left;"><center>&gt;&gt;</center>
<div style="margin-top:6px;" id="selectedColor"></div>
</span>

<table style="float:left;">
<tr><td colspan="5">... paint here</td></tr>
<tr>
	<td class="selCanvas" style="background:#fff;"> 01</td>
	<td class="selCanvas" style="background:#fff;"> 02</td>
	<td class="selCanvas" style="background:#fff;"> 03</td>
	<td class="selCanvas" style="background:#fff;"> 04</td>
	<td class="selCanvas" style="background:#fff;"> 05</td>
</tr><tr>
	<td class="selCanvas" style="background:#fff;"> 06</td>
	<td class="selCanvas" style="background:#fff;"> 07</td>
	<td class="selCanvas" style="background:#fff;"> 08</td>
	<td class="selCanvas" style="background:#fff;"> 09</td>
	<td class="selCanvas" style="background:#fff;"> 10</td>
</tr><tr>
	<td class="selCanvas" style="background:#fff;"> 11</td>
	<td class="selCanvas" style="background:#fff;"> 12</td>
	<td class="selCanvas" style="background:#fff;"> 13</td>
	<td class="selCanvas" style="background:#fff;"> 14</td>
	<td class="selCanvas" style="background:#fff;"> 15</td>
</tr><tr>
	<td class="selCanvas" style="background:#fff;"> 16</td>
	<td class="selCanvas" style="background:#fff;"> 17</td>
	<td class="selCanvas" style="background:#fff;"> 18</td>
	<td class="selCanvas" style="background:#fff;"> 19</td>
	<td class="selCanvas" style="background:#fff;"> 20</td>
</tr><tr>
	<td class="selCanvas" style="background:#fff;"> 21</td>
	<td class="selCanvas" style="background:#fff;"> 22</td>
	<td class="selCanvas" style="background:#fff;"> 23</td>
	<td class="selCanvas" style="background:#fff;"> 24</td>
	<td class="selCanvas" style="background:#fff;"> 25</td>
</tr>
</table>
<div style="margin:1.8em;float:left">
<button type="button" id="generate">Generate!</button><button type="button" id="reset">Reset</button><br /><br />
<label for="lineResult">Resulted password >></label><br /><input id="lineGResult" style="width:300px;" />
</div>
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
</div></div>

<div id="tabs-3" class="ui-widget"><div class="ui-state-highlight ui-corner-all" style="margin:25px;padding:1em;">
<p><span class="ui-icon ui-icon-info" style="float:left;margin-right:0.3em;margin-top:0.2em;"></span><strong>Encryption</strong> </p>
	<textarea id="wysiwyg" rows="15" cols="90"></textarea>
</div></div>

</div>
</body>
</html>