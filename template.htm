<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Graphical Password</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Graphical Password Generator">
	<meta name="author" content="Cristi Constantin">
	<link type="text/css" rel="stylesheet" href="js/bootstrap.css" />
	<link type="text/css" rel="stylesheet" href="js/responsive.css" />
	<style>
	.input-xxlarge, .input-large {font-family: "DejaVu Sans Mono", "Courier New", "Courier";}
	.hashBox {padding-left:97px;padding-bottom:11px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}
	.selPalette, .selCanvas {
		width:25px; height:20px; padding:0.5em; margin:10px; border:1px solid black;
		color:#333; text-align:center; text-shadow: 0px 5px 20px #fff;}
	#selectedColor {width:25px; height:25px; padding:0.5em; margin:31px 10px 0 10px; border:1px solid black; float:left;}
	.hover {cursor:pointer; text-shadow:0px 6px 10px blue, 0px 10px 15px red;}
	</style>
	<!--[if lt IE 9]><script src="js/html5.js"></script><![endif]-->
	<!--<link type="image/ico" rel="shortcut icon" href="img/favicon.ico">-->
</head>
<body>

<div class="container-fluid" style="margin-top:20px;">
	<div class="row-fluid">
		<div class="span2">&nbsp;</div>

		<div class="span8">

		<div class="tabbable">
		<ul class="nav nav-tabs" style="font-size: large;">
			<li class="active"><a href="#tab-1" data-toggle="tab">Visual Pass</a></li>
			<li><a href="#tab-2" data-toggle="tab">Graphical Pass</a></li>
		</ul>
		<div class="tab-content">

			<!--  SIMPLE PASS GEN T.A.B.  -->
			<div class="tab-pane active" id="tab-1"><div class="well">

			<button class="btn btn-mini btn-inverse" id="black_mode" style="float:right;">Black</button>

			<h3>&nbsp;Password generator&nbsp;<i class="icon-question-sign" id="click-help1" style="margin-top:0.2em;cursor:pointer;cursor:hand;"></i></h3><br>

			<div class="control-group">
				<label for="lineSite">Site you want to generate a password for:</label>
				<div class="controls">
					<input type="text" class="input-xxlarge" id="lineSite" />&nbsp;
					<span class="label label-info" id="siteLen" style="padding:8px 8px 1px 7px;font-size:14px;">0</span><br>
				</div>
				<label for="linePwd">A secret passphrase/ keyword for this site:</label>
				<div class="controls">
					<input type="text" class="input-xxlarge" id="linePwd" />&nbsp;
					<span class="label label-info" id="pwdLen" style="padding:8px 8px 1px 7px;font-size:14px;">0</span><br>
				</div>
				<div class="controls" style="margin-top:0.5em;">
					<button class="btn btn-large btn-primary" id="generate_p">Generate!</button>&nbsp;
					<button class="btn btn-large btn-warning" id="reset_p">Reset</button>&nbsp;
					<button class="btn btn-large btn-info" id="copy_p">Copy</button><br>
				</div>
				<label for="lineResult" style="margin-top:1em;">Resulted password &gt;&gt;</label>
				<div class="controls">
					<span class="input-xxlarge uneditable-input" id="lineResult"></span>
					<span class="hashBox" id="c1">&nbsp;</span>&nbsp;
					<span class="hashBox" id="c2">&nbsp;</span>&nbsp;
					<span class="hashBox" id="c3">&nbsp;</span>&nbsp;
					<span class="hashBox" id="c4">&nbsp;</span>&nbsp;
					<span class="hashBox" id="c5">&nbsp;</span>
				</div>
			</div>

			<div id="box-help1" class="alert alert-info">
			<span class="label label-info">HELP</span><br>
			<p style="margin-top:0.5em;">Here you can generate very complex passwords, using words that you can easily remember.<br>
			The resulted password is a lot better than a normal, easy to guess password!<br><br>
			In the first textbox, you type the name of the site or program you want to create the password for.<br>
			In the second textbox, you type a passphrase that you can easily remember, maybe related to the site or application. If the phrase is long, the resulted password is also longer!</p>
			<span class="label label-info">EXAMPLES</span><br>
			<p style="margin-top:0.5em;"><i>(text 1) `Facebook` ; (text 2) `my fbk account is the best!` ; (resulted password) YXucpu6ihyRp9xdvkNZLXWOC<br>
			(text 1) `TwiTTr` ; (text 2) `i LOVE to tweet` ; (resulted password) sqOoh1DakzuGxvQ</i></p>
			<span class="label label-info">HINTS</span><br>
			<p style="margin-top:0.5em;"><i>All text is Case Sensitive</i>, so `Facebook` is different from `FaceBook` and different from `facebook`.<br>
			If you are lazy, you can make some kind of template for your passwords, for example, `MySite` and `MySite is the best!`; replace `MySite` with your site/ program. The site and the password are cryptographically hashed, so it's safe.<br>
			Before typing your passwords, you must be careful, <i>noone must see what you type</i>! Use the `black mode` if you think someone is watching behind your back. If someone knows both <i>the site</i> and <i>the passphrase</i>, he can generate your password and break into your account!<br><br>
			This is different from everything you used before, you have to be original, but at the same time, use words easy to remember.</p>
			</div> <!--  /help box  -->

			</div></div> <!--  /T.A.B.  -->

			<!--  VISUAL PASS GEN T.A.B.  -->
			<div class="tab-pane" id="tab-2"><div class="well">

			<h3>&nbsp;Visual Password generator&nbsp;<i class="icon-question-sign" id="click-help2" style="margin-top:0.2em;cursor:pointer;cursor:hand;"></i></h3><br>

			<table style="float:left;">
			<tr><td colspan="3"><big>Select color ...</big></td></tr>
			<tr>
				<td class="selPalette" style="background:red;"> R</td>
				<td class="selPalette" style="background:yellow;"> Y</td>
				<td class="selPalette" style="background:blue;"> B</td>
			</tr><tr>
				<td class="selPalette" style="background:orange;"> O</td>
				<td class="selPalette" style="background:green;"> G</td>
				<td class="selPalette" style="background:darkviolet;"> V</td>
			<tr></tr>
				<td class="selPalette" style="background:white;"> X</td>
				<td class="selPalette" style="background:grey;"> G</td>
				<td class="selPalette" style="background:black;"> B</td>
			</tr>
			</table>

			<span style="float:left;"><center><big>&gt;&gt;</big></center><div style="margin-top:6px;" id="selectedColor"></div></span>

			<table style="float:left;">
			<tr><td colspan="5"><big>... paint here</big></td></tr>
			<tr>
				<td class="selCanvas" style="background:#fff;"> 01</td>
				<td class="selCanvas" style="background:#fff;"> 02</td>
				<td class="selCanvas" style="background:#fff;"> 03</td>
				<td class="selCanvas" style="background:#fff;"> 04</td>
				<td class="selCanvas" style="background:#fff;"> 05</td>
			</tr><tr>
				<td class="selCanvas" style="background:#fff;"> 06</td>
				<td class="selCanvas" style="background:#fff;"> 07</td>
				<td class="selCanvas" style="background:#fff;"> 08</td>
				<td class="selCanvas" style="background:#fff;"> 09</td>
				<td class="selCanvas" style="background:#fff;"> 10</td>
			</tr><tr>
				<td class="selCanvas" style="background:#fff;"> 11</td>
				<td class="selCanvas" style="background:#fff;"> 12</td>
				<td class="selCanvas" style="background:#fff;"> 13</td>
				<td class="selCanvas" style="background:#fff;"> 14</td>
				<td class="selCanvas" style="background:#fff;"> 15</td>
			</tr><tr>
				<td class="selCanvas" style="background:#fff;"> 16</td>
				<td class="selCanvas" style="background:#fff;"> 17</td>
				<td class="selCanvas" style="background:#fff;"> 18</td>
				<td class="selCanvas" style="background:#fff;"> 19</td>
				<td class="selCanvas" style="background:#fff;"> 20</td>
			</tr><tr>
				<td class="selCanvas" style="background:#fff;"> 21</td>
				<td class="selCanvas" style="background:#fff;"> 22</td>
				<td class="selCanvas" style="background:#fff;"> 23</td>
				<td class="selCanvas" style="background:#fff;"> 24</td>
				<td class="selCanvas" style="background:#fff;"> 25</td>
			</tr>
			</table>

			<div style="margin:1.8em;float:left">
				<button class="btn btn-large btn-primary" id="generate_g">Generate!</button>&nbsp;
				<button class="btn btn-large btn-warning" id="reset_g">Reset</button>&nbsp;
				<button class="btn btn-large btn-info" id="copy_g">Copy</button><br>
				<label for="lineResult" style="margin-top:0.5em;">Resulted password &gt;&gt;</label>
				<span class="input-large uneditable-input" id="lineGResult"></span>
			</div>

			<br><br><br><br><br><br><br><br><br><br><br>

			<div id="box-help2" class="alert alert-info">
			<span class="label label-info">HELP</span><br>
			<p style="margin-top:0.5em;">Here you can generate passwords from your drawing.<br>
			The order in which you draw the colors is not important, only the shape is.<br>
			You must select at least <b>3</b> colors, up to a maximum of <b>22</b> colors.<br><br>
			You must be very careful when you are drawing, noone must see what you paint!<br>
			If someone can reproduce your drawing and he knows the site/ program where you use this password, he can generate the same password and log into your account!</p>
			</div> <!--  /help box  -->

			</div></div> <!--  /T.A.B.  -->

		</div> <!--  /tab-content -->
		</div> <!--  /tabbable -->
		</div> <!-- /span6 -->

		<div class="span2"&nbsp;></div>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/bootstrap.js"></script>
<script type="text/javascript" src="js/ZeroClipboard.js"></script>

<script type="text/javascript">
var color = "#fff";
var black_mode = false;

var clip1 = new ZeroClipboard(document.getElementById("copy_p"), {
	moviePath: "js/ZeroClipboard.swf"
});
var clip2 = new ZeroClipboard(document.getElementById("copy_g"), {
	moviePath: "js/ZeroClipboard.swf"
});

function reset_p() {
	// Reset from first tab
	$("span#lineResult").text("");
	$("#copy_p").attr("data-clipboard-text", "");
	$("span#c1").css("background-color", "transparent");
	$("span#c2").css("background-color", "transparent");
	$("span#c3").css("background-color", "transparent");
	$("span#c4").css("background-color", "transparent");
	$("span#c5").css("background-color", "transparent");
}

$(document).ready(function($) {
	$.ajaxSetup({
		cache: false
	});

	$("#box-help1").hide();
	$("#box-help2").hide();

	$("#click-help1").click(function() {
		$("#box-help1").toggle(750);
	});
	$("#click-help2").click(function() {
		$("#box-help2").toggle(750);
	});

	$('input#lineSite').keyup(function() {
		var str = $("input#lineSite").val();
		if (str=="") {$("span#siteLen").text("0");return};
		$("span#siteLen").text(str.length);
	});
	$('input#linePwd').keyup(function() {
		var str = $("input#linePwd").val();
		if (str=="") {$("span#pwdLen").text("0");return};
		$("span#pwdLen").text(str.length);
	});

	$(".selPalette").hover(
		function() {$(this).addClass("hover");},
		function() {$(this).removeClass("hover");}
	);
	$(".selCanvas").hover(
		function() {$(this).addClass("hover");},
		function() {$(this).removeClass("hover");}
	);

	$(".selPalette").click(function() {
		color = $(this).css("background-color");
		$("#selectedColor").css("background-color", color);
	});
	$(".selCanvas").click(function() {
		$(this).css("background-color", color);
	});

	$("#black_mode").click(function() {
		if (black_mode) {
			$("input#lineSite").css("background-color", "#fff");
			$("input#linePwd").css("background-color", "#fff");
		} else {
			$("input#lineSite").css("background-color", "rgb(85, 85, 85)");
			$("input#linePwd").css("background-color", "rgb(85, 85, 85)");
		};
		black_mode = !black_mode;
	});

	$("#reset_p").click(function() {
		$("input#lineSite").val("");
		$("input#linePwd").val("");
		reset_p();
	});

	$("#reset_g").click(function() {
		color = "#fff";
		$(".selCanvas").css("background-color", "#fff");
		$("#selectedColor").css("background-color", "#fff");
		$("#copy_g").attr("data-clipboard-text", "");
		$("span#lineGResult").text("");
	});

	$("#generate_p").click(function() {
		var str1 = $("input#lineSite").val();
		var str2 = $("input#linePwd").val();
		if (str1=="" || str2=="") { reset_p(); return };
		// Remove all error alerts
		$('.alert-error').remove();
		// The site and the password must have at least 3 characters
		if (str1.length < 3) {
			$('#box-help1').before('<div class="alert alert-error"><a class="close" data-dismiss="alert">×</a><strong>Error!</strong> The Site must have at least 3 characters!</div>');
			reset_p();
			return;
		};
		if (str2.length < 3) {
			$('#box-help1').before('<div class="alert alert-error"><a class="close" data-dismiss="alert">×</a><strong>Error!</strong> The Password must have at least 3 characters!</div>');
			reset_p();
			return;
		};
		// Post via XMLHttpRequest
		$.post("jqXHR/p", {s: str1, p: str2},
			function(input) {
				$("span#lineResult").text(input.message);
				$("#copy_p").attr("data-clipboard-text", input.message);
				$("span#c1").css("background-color", "#"+input.c1);
				$("span#c2").css("background-color", "#"+input.c2);
				$("span#c3").css("background-color", "#"+input.c3);
				$("span#c4").css("background-color", "#"+input.c4);
				$("span#c5").css("background-color", "#"+input.c5);
			},
			'json');
	});

	$("#generate_g").click(function() {
		var matrix = ""; var rgb = ""; var result = "";
		function hex(x) {return ("0" + parseInt(x).toString(16)).slice(-2);}
		$('.selCanvas').each(function(index) {
			rgb = $(this).css('background-color').match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
			result = hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
			matrix += result + ' ';
		});
		// Remove all error alerts
		$('.alert-error').remove();
		// Must have 3 colors selected
		if ( $('.selCanvas').length - matrix.match(/ffffff/g).length < 3 ) {
			$('#box-help2').before('<div class="alert alert-error"><a class="close" data-dismiss="alert">×</a><strong>Error!</strong> Cannot generate password!\nMust paint at least 3 cells!</div>');
			$("#copy_g").attr("data-clipboard-text", "");
			$("span#lineGResult").text("");
			return;
		};
		// Must have 3 white cells
		if ( matrix.match(/ffffff/g).length < 3 ) {
			$('#box-help2').before('<div class="alert alert-error"><a class="close" data-dismiss="alert">×</a><strong>Error!</strong> Cannot generate password!\nMust have at least 3 white cells!</div>');
			$("#copy_g").attr("data-clipboard-text", "");
			$("span#lineGResult").text("");
			return;
		};
		// Post message via XMLHttpRequest
		$.post("jqXHR/g", {val: matrix},
			function(input) {
				$("#copy_g").attr("data-clipboard-text", input.message);
				$("span#lineGResult").text(input.message);
			},
			'json');
	});
});
</script>

</body>
</html>